<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Albero genealogico interattivo</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <div>
      <h1>Albero genealogico interattivo</h1>
      <div class="hint">Foto tonde + nomi, collegamenti genitori ‚Üí figli, coniugi e fratelli. Trascina per muoverti, rotellina per zoom.</div>
    </div>
    <div class="toolbar">
      <div class="field">
        <label for="name">Nome completo</label>
        <input id="name" placeholder="Es. Mario Rossi" 
               title="Nome e cognome completi della persona da aggiungere" />
      </div>
      <div class="field">
        <label for="photo">URL foto (https://...)</label>
        <input id="photo" placeholder="https://..." 
               title="URL pubblico di una foto (opzionale). In alternativa usa 'Foto locale'." />
      </div>
      <div class="field">
        <label for="photoFile">Foto locale</label>
        <input id="photoFile" type="file" accept="image/*" 
               title="Carica una foto dal tuo computer. Ha priorit√† sull‚ÄôURL se entrambi presenti." />
      </div>
      <div class="field">
        <label for="parentA">Genitore A (opz.)</label>
        <select id="parentA" 
                title="Seleziona un nodo esistente come primo genitore (opzionale)"></select>
      </div>
      <div class="field">
        <label for="parentB">Genitore B (opz.)</label>
        <select id="parentB" 
                title="Seleziona un nodo diverso come secondo genitore (opzionale)"></select>
      </div>
      <div class="field">
        <label for="spouseWith">Coniuge di (opz.)</label>
        <select id="spouseWith" 
                title="Collega questa persona in matrimonio con un nodo esistente (opzionale)"></select>
      </div>
      <button class="primary" id="add">Aggiungi persona</button>
      <button class="danger" id="delete">Elimina selezionato</button>
    </div>
  </header>

  <main>
    <aside>
      <div class="stack">

        <!-- Card: Istruzioni -->
        <div class="card">
          <h2>Istruzioni veloci</h2>
          <ul class="mini-list">
            <li class="mini-item"><span class="dot"></span>Nome + foto (URL o file locale).</li>
            <li class="mini-item"><span class="dot"></span>Imposta genitori e/o coniuge (opzionali).</li>
            <li class="mini-item"><span class="dot"></span>Clic su un nodo per selezionarlo, poi ‚ÄúElimina selezionato‚Äù.</li>
            <li class="mini-item"><span class="dot"></span>Trascina sfondo per muoverti, rotellina per zoom.</li>
          </ul>
        </div>

        <!-- Card: Modifica selezionato -->
      
<!-- Card: Modifica selezionato (sostituisci questo blocco al tuo attuale) -->
<div class="card">
  <h2>Modifica selezionato</h2>
  <div class="stack">
    <label class="legend" for="editName">Nome e cognome</label>
    <input id="editName" placeholder="Nome completo"
           title="Modifica nome/cognome della persona selezionata" />

    <label class="legend" for="editPhoto">Foto (URL)</label>
    <input id="editPhoto" placeholder="URL foto (https://...)"
           title="URL pubblico della foto; puoi caricarne una locale sotto" />

    <label class="legend" for="editPhotoFile">Foto locale (sovrascrive URL)</label>
    <input id="editPhotoFile" type="file" accept="image/*"
           title="Scegli una foto dal computer; ha priorit√† sull‚ÄôURL" />

    <label class="legend" for="editParentA">
      Genitore A (obiettivo: creare figli e fratelli)
    </label>
    <select id="editParentA"
            title="Primo genitore. Se due persone condividono lo stesso Genitore A/B risultano fratelli."></select>
    <div class="legend">Tipico: ‚ÄúPadre‚Äù o ‚ÄúGenitore sconosciuto‚Äù.</div>

    <label class="legend" for="editParentB">
      Genitore B (opzionale, diverso da Genitore A)
    </label>
    <select id="editParentB"
            title="Secondo genitore (opzionale). Deve essere diverso da Genitore A."></select>
    <div class="legend">Tipico: ‚ÄúMadre‚Äù. Lascia vuoto se non noto.</div>

    <label class="legend" for="editSpouseWith">
      Coniuge di (linea tratteggiata)
    </label>
    <select id="editSpouseWith"
            title="Collega questa persona in matrimonio con un nodo esistente."></select>
    <div class="legend">Usa per coppie/sposi; non influenza la fratria.</div>

    <button class="primary" id="applyEdit">Applica modifiche</button>
  </div>
  <div class="legend">Suggerimento: per segnare fratelli assegna lo stesso ‚ÄúGenitore A‚Äù (o B) a pi√π persone.</div>
</div>

        <!-- Card: Esporta / Importa -->
        <div class="card">
          <h2>Esporta / Importa</h2>
          <div class="mini-list">
            <button class="primary" id="export">Esporta JSON</button>
            <input type="file" id="import" accept="application/json" />
            <div class="legend">Autosave attivo su questo browser. Puoi anche salvare/caricare file JSON.</div>
          </div>
        </div>

        <!-- Card: Legenda linee -->
        <div class="card">
          <h2>Legenda linee</h2>
          <ul class="mini-list legend-lines">
            <li class="mini-item"><span class="legend-line"></span> Genitore ‚Üí figlio (linea continua)</li>
            <li class="mini-item"><span class="legend-line spouse"></span> Coniugi (linea tratteggiata)</li>
            <li class="mini-item"><span class="legend-line sibling"></span> Fratelli (tratto corto)</li>
          </ul>
          <div class="legend">Per segnare fratelli: assegna lo stesso ‚ÄúGenitore A/B‚Äù a pi√π persone.</div>
        </div>

      </div>
    </aside>

    <div class="viewport" id="viewport">
      <div id="canvas">
        <svg class="links" id="links" xmlns="http://www.w3.org/2000/svg"></svg>
        <!-- Nodes render here -->
      </div>
      <div class="pan-hint">üí° Trascina per muovere ‚Ä¢ Rotellina per zoom ‚Ä¢ Doppio click per centrare</div>
      
      <div class="footer-bar">
        <button class="iconbtn" id="zoomOut">‚àí</button>
        <button class="iconbtn" id="reset">‚ü≥</button>
        <button class="iconbtn" id="fit">‚§¢</button>
        <button class="iconbtn" id="print">üñ®Ô∏è</button>
        <button class="iconbtn" id="zoomIn">+</button>
      </div>
    </div>
  </main>

  <!-- usa ?v=3 per forzare refresh -->
  <script src="app.js?v=4"></script>
</body>
</html>
