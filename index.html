<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Albero genealogico interattivo</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <div>
      <h1>Albero genealogico interattivo</h1>
      <div class="hint">
        Schede rettangolari con foto ‚Äî <strong>blu</strong> = maschio, <strong>rosa</strong> = femmina.
        Linea <strong>continua</strong>: genitore‚Üífiglio ‚Ä¢ <strong>tratteggiata</strong>: coniugi.
        Doppio click su una scheda per ingrandirla.
      </div>
    </div>
    <div class="toolbar">
      <button class="iconbtn" id="zoomOut" title="Zoom -">‚àí</button>
      <button class="iconbtn" id="reset" title="Reset vista">‚ü≥</button>
      <button class="iconbtn" id="fit" title="Adatta alla finestra">‚§¢</button>
      <button class="iconbtn" id="autoLayout" title="Auto-layout generazioni">‚ÜïÔ∏é</button>
      <button class="iconbtn" id="print" title="Stampa / PDF">üñ®Ô∏è</button>
      <button class="iconbtn" id="zoomIn" title="Zoom +">+</button>
    </div>
  </header>

  <main>
    <aside>
      <div class="stack">

        <div class="card">
          <h2>Legenda & Visualizzazione</h2>
          <ul class="mini-list">
            <li class="mini-item"><span class="swatch male"></span> Bordo <b>blu</b>: Maschio</li>
            <li class="mini-item"><span class="swatch female"></span> Bordo <b>rosa</b>: Femmina</li>
            <li class="mini-item"><span class="legend-line"></span> Linea <b>continua</b>: Genitore ‚Üí Figlio</li>
            <li class="mini-item"><span class="legend-line spouse"></span> Linea <b>tratteggiata</b>: Coniugi</li>
            <li class="mini-item"><span class="legend-bracket"></span> Staffa orizzontale: Gruppo fratelli</li>
          </ul>
          <div class="toggles">
            <label><input type="checkbox" id="toggleBands" checked> Bande generazioni</label>
            <label><input type="checkbox" id="toggleGrid"> Griglia</label>
            <label><input type="checkbox" id="toggleNames" checked> Mostra nomi</label>
          </div>
          <div class="legend small">Suggerimento: usa ‚Äú‚ÜïÔ∏é Auto-layout‚Äù per riallineare generazioni, coniugi affiancati e fratelli raggruppati.</div>
        </div>

        <!-- Card: Aggiungi persona -->
        <div class="card">
          <h2>Aggiungi persona</h2>
          <div class="stack">
            <div class="field">
              <label for="name">Nome completo</label>
              <input id="name" placeholder="Es. Mario Rossi" />
            </div>
            <div class="field">
              <label for="photo">URL foto (https://...)</label>
              <input id="photo" placeholder="https://..." />
            </div>
            <div class="field">
              <label for="photoFile">Foto locale</label>
              <input id="photoFile" type="file" accept="image/*" />
            </div>
            <div class="field">
              <label for="gender">Sesso</label>
              <select id="gender">
                <option value="">(non specificato)</option>
                <option value="M">Maschio</option>
                <option value="F">Femmina</option>
              </select>
            </div>
            <div class="field">
              <label for="parentA">Genitore A (opz.)</label>
              <select id="parentA"></select>
            </div>
            <div class="field">
              <label for="parentB">Genitore B (opz.)</label>
              <select id="parentB"></select>
            </div>
            <div class="field">
              <label for="spouseWith">Coniuge di (opz.)</label>
              <select id="spouseWith"></select>
            </div>
            <button class="primary" id="add">Aggiungi</button>
          </div>
          <div class="legend">Compila e premi ‚ÄúAggiungi‚Äù. Genitori e coniuge sono opzionali.</div>
        </div>

        <!-- Card: Modifica selezionato -->
        <div class="card">
          <h2>Modifica selezionato</h2>
          <div class="stack">
            <div class="field">
              <label for="editName">Nome completo</label>
              <input id="editName" placeholder="Nome completo" />
            </div>
            <div class="field">
              <label for="editPhoto">URL foto (https://...)</label>
              <input id="editPhoto" placeholder="https://..." />
            </div>
            <div class="field">
              <label for="editPhotoFile">Foto locale</label>
              <input id="editPhotoFile" type="file" accept="image/*" />
            </div>
            <div class="field">
              <label for="editGender">Sesso</label>
              <select id="editGender">
                <option value="">(non specificato)</option>
                <option value="M">Maschio</option>
                <option value="F">Femmina</option>
              </select>
            </div>
            <div class="field">
              <label for="editParentA">Genitore A</label>
              <select id="editParentA"></select>
            </div>
            <div class="field">
              <label for="editParentB">Genitore B</label>
              <select id="editParentB"></select>
            </div>
            <div class="field">
              <label for="editSpouseWith">Coniuge di</label>
              <select id="editSpouseWith"></select>
            </div>
            <button class="primary" id="applyEdit">Applica modifiche</button>
            <button class="danger" id="delete">Elimina selezionato</button>
          </div>
          <div class="legend">Clicca una scheda nell‚Äôalbero per caricare qui i suoi dati.</div>
        </div>

        <!-- Card: Esporta / Importa -->
        <div class="card">
          <h2>Esporta / Importa</h2>
          <div class="stack">
            <button class="primary" id="export">Esporta JSON</button>
            <button class="primary" id="reloadRemote" type="button">Ricarica da data.json</button>
            <input type="file" id="import" accept="application/json" />
          </div>
          <div class="legend">‚ÄúEsporta‚Äù salva un file .json. ‚ÄúScegli file‚Äù carica un .json. ‚ÄúRicarica‚Äù legge il data.json del repo.</div>
        </div>

      </div>
    </aside>

    <div class="viewport gen-bands" id="viewport">
      <div id="canvas">
        <svg class="links" id="links" xmlns="http://www.w3.org/2000/svg"></svg>
      </div>
      <div class="pan-hint">üí° Trascina per muovere ‚Ä¢ Rotellina per zoom ‚Ä¢ Doppio click su una scheda per ingrandire</div>
    </div>
  </main>

  <script src="app.js"></script>
</body>
</html>
